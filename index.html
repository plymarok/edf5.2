function renderChroniqueLive(values){
  const {
    FS, FE, ds, S, da, A, de, E, k,
    q1, q2, fatherAfter, childAfter, fatherTotal,
    validOrder, ok1, ok2, ready
  } = values;

  const L = [];

  // 1) Cadrage élégant
  if (FS && FE) {
    L.push(
      `<h4>Le cadre</h4>
       <p>Rideau levé sur la <span class="chip">${guessPeriodLabel(FS,FE)}</span> :
       du <b>${fmt(FS)}</b> au <b>${fmt(FE)}</b>, c’est dans cet intervalle que se joue la répartition
       entre <i>père</i> et <i>fils</i>.</p>`
    );
  } else {
    L.push(
      `<h4>Le cadre</h4>
       <p class="muted">Indique le début et la fin de la facture : je poserai ensuite les jalons et déroulerai le calcul.</p>`
    );
  }

  // 2) Les jalons, racontés
  const jalons = [];
  if (ds) jalons.push(`à la <b>clôture précédente</b> (${fmt(ds)}), l’index du père est <b>${Number.isFinite(S)?String(S):"?"}</b> kWh`);
  if (da) jalons.push(`le <b>jour de l’AP</b> (${fmt(da)}), on relève <b>${Number.isFinite(A)?String(A):"?"}</b> kWh`);
  if (de) jalons.push(`à la <b>date anniversaire</b> (${fmt(de)}), l’index affiche <b>${Number.isFinite(E)?String(E):"?"}</b> kWh`);
  L.push(
    jalons.length
      ? `<p>Trois repères structurent l’histoire : ${jalons.join(" ; ")}.</p>`
      : `<p class="muted">J’attends les trois repères : fin N-1 → AP → anniversaire.</p>`
  );

  // 3) La bascule de puissance
  if (da && de) {
    if (k >= 0 && k <= 1) {
      L.push(
        `<p>À compter de l’AP, la production se partage avec constance :
         <b>${pctText(k)} %</b> au père et <b>${pctText(1-k)} %</b> au fils.
         Avant cette date, le père est seul à bord.</p>`
      );
    } else {
      L.push(`<p class="muted">Renseigne le <b>coefficient du père</b> après AP (entre 0 et 1) pour ventiler correctement.</p>`);
    }
  }

  // 4) Les quantités, dites clairement
  if (ready) {
    L.push(
      `<h4>Ce que disent les compteurs</h4>
       <p>De la fin N-1 à l’AP : <b>${A} − ${S} = ${q1} kWh</b> intégralement au père.</p>
       <p>De l’AP à l’anniversaire : <b>${E} − ${A} = ${q2} kWh</b>, ventilés en
       <b>${fatherAfter} kWh</b> (père) et <b>${childAfter} kWh</b> (fils).</p>
       <p><b>Verdict pour le père :</b> <b>${fatherTotal} kWh</b> attendus sur la facture.</p>`
    );

    L.push(
      `<p>${ok1 ? "✅" : "❌"} Les parts <i>père</i> et <i>fils</i> recomposent bien <i>Q_après</i> ;
       ${ok2 ? "✅" : "❌"} <i>Q_avant + Q_après</i> recolle exactement à <i>Δindex</i>.
       Autrement dit, les chiffres s’accordent avec le récit.</p>`
    );
  } else if (ds && da && de && !validOrder) {
    L.push(
      `<p class="ko">⚠ L’intrigue se brouille : l’ordre chronologique doit rester limpide
       (<b>fin N-1 ≤ AP ≤ anniversaire</b>) et les index doivent être croissants.</p>`
    );
  }

  // 5) Ce qui manque encore
  if (!ready) {
    const manques = [];
    if (!FS || !FE) manques.push("période de facturation");
    if (!ds || !Number.isFinite(S)) manques.push("index de fin N-1");
    if (!da || !Number.isFinite(A)) manques.push("index le jour d’AP");
    if (!de || !Number.isFinite(E)) manques.push("index à l’anniversaire");
    if (!(k>=0 && k<=1)) manques.push("coefficient du père après AP");
    if (manques.length){
      L.push(`<p class="muted">Pour achever le tableau : ${manques.join(" • ")}.</p>`);
    }
  }

  chroniqueLive.innerHTML = L.join("");
}
